# 花了2万多买的Java架构师课程全套，现在分享给大家，从软件安装到底层源码（马士兵教育MCA架构师VIP教程） - P152：【Linux】TCP协议概述 - 马士兵_马小雨 - BV1zh411H79h

好啊，我们回来啊，接着上课。么关于IB协议啊，那么我们在运维这个阶段呢，如果你要去学呢啊那你了解这么多就行了。



![](img/754c3d16fe57f07724c5612f3fd8aa4d_1.png)

🤧。Okay。🤧那么在这里头呢，如果说啊将来我们做这个想更深入的去学习啊，将来网络这块啊，通过周末班学习的同学呢，我们会啊做进一步提升的学习。那么如果呢我们在运维阶段，大家呢啊了解到这个。



![](img/754c3d16fe57f07724c5612f3fd8aa4d_3.png)

交换机啊路由器原理对IB协议有所了解即可啊。IP协议呢里头会有1个IP的数据格式。Oh。

![](img/754c3d16fe57f07724c5612f3fd8aa4d_5.png)

。Okay。Yeah。啊，会有1个IP的数据报文格式。

![](img/754c3d16fe57f07724c5612f3fd8aa4d_7.png)

那么这里头呢，我不想说每一个人啊。你都在这一块有较深的造诣。我想告诉你的就是通过这张图啊。

![](img/754c3d16fe57f07724c5612f3fd8aa4d_9.png)

啊，通过这张图，我们把IP这个报文啊，它大概的一个形式，它长啥样有所了解啊。0到300到32。什么意思呢？啊。32位。啊，32位的数据。那么在这里头我们能看到就是版本。啊，版本比如IPV4IPV4的话。

它占了。四位。啊，占了4位。但是呢IPV6它就占了6位啊，这不一样。所以在1个IP的报文啊，在发送的时候，前边有版本号，有手部的长度啊。有服务类型，有总长度，有标识，有标志啊，还有片偏移。

这些都相对于更底层的东西。所以现在让你一个beginner的一个小白啊，你刚入门，你去了解这些内容。那对于你来说，那这样的东西就过重了。啊。

但是呢如果说有至于成为说啊该行业或对啊我们网络有较深了解的同学呢，将来有机会啊，我们通过周末提高班，我们再深入的去研究哥在带你写编码，看看底下，包括哎我们底下扫K的链接是咋回事啊，我们一行行的玩啊。

生存时间协议啊，手部校验和。那普通的同学啊，普通的同学说您现在呀学习经力有限啊，您也比较辛苦，那哎你只要了解到说我这里头有一个原地址，目标地址。



![](img/754c3d16fe57f07724c5612f3fd8aa4d_11.png)

![](img/754c3d16fe57f07724c5612f3fd8aa4d_12.png)

数据。你知道这3块就行了。其他的不需要您再去了解啊。那么IP的首部，也就是说刚才我给你画七层网络模型的时候，你看是不是啊它就有IP啊，这就是三层网络的首部，对不对？然后这是数据部分啊，了解到这儿即可。



![](img/754c3d16fe57f07724c5612f3fd8aa4d_14.png)

Hpe。这张图呢我给你保存一下啊，我给你保存一下。Oh。

![](img/754c3d16fe57f07724c5612f3fd8aa4d_16.png)

🤧。

![](img/754c3d16fe57f07724c5612f3fd8aa4d_18.png)

Okay。IP豹文格式。哦。不做掌握，仅了解。啊，先了解。那么就是方便让你知道啊。了解这里头有原地址。有。目目标地址或目的地址啊。有数据部分了解这个即可啊。Okay。好，这个是IP的报公格式。

那么呢对于这个协议呢，我们简单的了解即可啊，知道它很重要。那么从IP协议里头呢，我们要体现出啥呢？我们要体现出IP地址啊，我说这个的目的主要是要做IP地址用的。Book。Okay。

那么第二个呢啊这里头重要的协议呢啊IP协议咱就过去了啊。ICMP的网络协议，这里头刚才说了，那么他干什么呢？我们拼命令的时候见到了。啊，ICMP协议。用于传递。啊，传递啥呀？差错信息。差错信息。Oh。

啊。🤧这是第一个差错信息。第二个时间，第三个回显。啊。第4个还会有一些网络信息。啊，它叫做豹纹。控制。数据。这些东西都相对更底层了啊更底层了。那么呢简单的来说呢，我们也可以给你搜一个啊。

我也可以给你搜一个。

![](img/754c3d16fe57f07724c5612f3fd8aa4d_20.png)

![](img/754c3d16fe57f07724c5612f3fd8aa4d_21.png)

。ICMP保文。

![](img/754c3d16fe57f07724c5612f3fd8aa4d_23.png)

Yeah。

![](img/754c3d16fe57f07724c5612f3fd8aa4d_25.png)

Okay。🤧嗯。好。

![](img/754c3d16fe57f07724c5612f3fd8aa4d_27.png)

Yeah。长这样啊。32位啊四个字节。

![](img/754c3d16fe57f07724c5612f3fd8aa4d_29.png)

。好，这个报文格式呢啊我也给你呢放到笔记中也仅做了解啊。

![](img/754c3d16fe57f07724c5612f3fd8aa4d_31.png)

![](img/754c3d16fe57f07724c5612f3fd8aa4d_32.png)

不用做太多掌握。

![](img/754c3d16fe57f07724c5612f3fd8aa4d_34.png)

好。🤧啊，报恩格式啊。Oh。Okay。好了，他这里头有很多的字段啊，豹文的类型里头有很多的字段。啊，那么比如说我们拼命令里头呢，它会有一个回应的应答，我们就看一下拼啊，简单的来了解一下拼。



![](img/754c3d16fe57f07724c5612f3fd8aa4d_36.png)

![](img/754c3d16fe57f07724c5612f3fd8aa4d_37.png)

Com。

![](img/754c3d16fe57f07724c5612f3fd8aa4d_39.png)

。

![](img/754c3d16fe57f07724c5612f3fd8aa4d_41.png)

啊。Oh。Oh。Oh。Okay。Okay。嗯。Okay。好，连上以后啊。听。百度。咱们看一下百度通不通啊。我。😮，好。好啊，那我这个因为是VPN开着啊，所以说可能会对国内的一些网站有问题啊。呃。

我就不调了，然后拼一个地址啊，这里头会有ICMP的SEQ啊，会有这个每一次的回显的值。啊。会显的值。那么呢在我们拼的时候呢，他会给我们有一个回显的应答啊回显的应答。那么一般的话呢，这里头有一些码呢。

就是比如说代码0啊0。就是一些回显的应答。那么如果啊还会有一些，比如说呃一呀、二啊、三啊、4啊、5啊、6啊，对吧？哎，它会代表着不同的意义。比如什么主机不可达呀，什么协议不可达等等等等啊。🤧嗯。

简单了解即可啊。

![](img/754c3d16fe57f07724c5612f3fd8aa4d_43.png)

🤧嗯嗯。😊，第3个PCP传输控制协议。哎，这个东西啊这个东西是我们要重点花时间去讲解的。啊，去讲解的。那么其他的那些内容呢，我将来会在我们一些的这个呃。网课呀或公开课的时候再会给大家再去说啊。

这个东西非常重要啊，是要求所有人都掌握的。那么这一块呢，面试啊，包括你在将来的发展的过程中，我们都需要用到啊，它的全名叫做传输控制协议。啊。简称TCP协议。它是在我们原有的IP协议的基础上。在咱们。

IP协议。的基础上。增加了。确认。确认重发。啊。滑动窗口。啊。和。复用。啊，复用等机制。我们通常要说到网络协议的时候，最重要的两个，一个是IP协议，另外一个就是TCP协议。所以我们。

网络中你要了解的两个啊，那就是TCP和IP协议。那么它最重要的一个特点，最重要的一个特点。好。提供了。稳定的。安全的。啊，一旦安全俩字就重要了，这是企业的标配。啊，稳定的、安全的、面向连接的。自节留。

第一句话不重要啊，了解第二句话背下来。啊，它是一种稳定的安全的，就这俩字儿。很重要。那么基于这个特点嗯。啊，基于这个特点。那么我们一些。比如说SSH将来您要学习的啊，HTTP等那些个服务啊。

那些个协议都要基于这一种。啊，都要低于这一种。那么TCP协议它有哪些特点？我给你说一下，最重要的记刚才标红的这个啊。哪些特点？第一个。啊，第一个。自节流府啥叫自节流啊，那肯定就是数据呀。对不对？

那字节流就一个一个的字节啊，说使用这个TCP。协议。进行数据传输。啊，10。传输。传输时。应用程序，你比如说QQ和QQ，我们在传信息啊，微信和微信传信息。咱们现在这个叉el连接到你的服务器啊，这就是。

应用程序之间数据传输啊，比如说你发送的用户名密码，哎，这就是一个安全的链接。啊。进行数据传输时。应用程序。哎，应用程序之间。对吧。你在传输数据的时候。啊，那么我们就可以称为。可以视为啊无结构。无结构的。

直接留。啊。这个呢如果你要想深入的去学习啊，这个是。呃。深入的去学习，你差不多啊，你得在本科阶段你就学不了，你得在研究生阶段啊，你去看一看这个原来呢我去。哎。在图书馆啊，我经常去看。然后呢。

因为我我家呢在。这个清华大学，所以说我有时候没事儿，我就去清华大学图书馆，我我去看一下啊，会有很多的东西。所以这个IT行业呢，如果你要想深扎根去啊去学习的话呢，真的我们有很多的路要走啊。

那么基于自节流的服务，那这一点呢就是什么呢？基于自节流的服务。Yeah。没有字节序。问题的。困扰。啊。那么如果你在去做编程的时候啊，十0年前我去给他们讲。给企业去讲C加加编程的时候，讲C语言编程的时候。

对吧？我们还会往尤尼克斯底层的编程会讲很多。所以这一块呢我给你提一下啊，你能理解呢，你就理解理解不了呢，你就了解啊，不需要你。掌握。哦。🤧他为你将来可能的学习提供一种思路啊。

所以第二个特点呢就是面向连接的服务。其实这一块呢，我可以不给你提，提了以后你就可能会有困惑啊，但是不给你提呢，我良心上又过不去。我觉得我讲我就得提。你听不听得懂，我都得说。啊。如果不说。

那这块就没有什么价值，所以得说啊，听不懂你就把它背下来。面向连接的服务就是在数据进行传输之前，TCP啊。Oh。重要啊。Yeah。好。好。Okay。好，说在数据传输之前。啊，那么这个TCP协议。需要先。

建立连接。那么正是因为他这个特点啊，所以呢这个在面试的时候呢，人家都会问。啊，人家都会问。那么建立连接之后，它在这个基础上啊再进行数据的传输。啊，那你要是做开发的。

你说我做网络编程的scket的底层问死你啊，你说我是做运维了啊，那人家OK可能就问一些设备就得了啊，不会特别的为难你。但是呢他想体验一下，比如说你有几年工作经验。那这时候他就该问你了啊，就该问你了。

那么TCP。啊，这个协议在创建连接的时候有哪些的步骤？啊，这就是这儿我们要说的。好，那我们就说一说啊说一说。🤧。好。那么TCP。协议啊，它为啥要面向连接的服务？那么是底层来说。

它是一种面向连接的单波协议。啊。完犊子啊，这东西又多了去了。那么这就涉及到了我们在网络中的概念单薄。主播。和广播。Oh。啊。那么单波这个词儿，今天第一次见广播这个词儿已经在。交换机的时候就出现了。

主播这个词儿今天第一次见啊。那么所谓的单波啊，就是有来言有去语。啊，有来言有去语，小姐姐约吗？必须得给你回约或不约啊，同意或不同意。说出去吃个饭吧，看个电影吧。对吧啊，唱唱歌喝喝酒吧。啊。对吧哎。

这都可以啊，所以单波在这里头一定要知道，也就是在数据发送和接收前。通信的双方啊，别管你是两台主机，两台服务器，两台手机，通信的双方。必须在。彼此间。建立一条连接。아웬디。Oh。🤧。单波就是。啊。

一对一的服务。啊，一对一的服务。有来源。有趣。Okay。好。那么主播后边我给你提一下啊，今天呢我们先了解单波和广播，因为我们学了交换机了。是吧哎。广播就是一对多的。一对多的服务。Oh。啊。

大家伙大家伙大家伙注意听注意听，注意听是吧？村东头老王家那条狗丢了啊，谁看着了，赶紧的上这个这个村委会这儿，赶紧的这个有有有有有重要信息线索的，赶紧过来啊，跟老王头联系。啦，哎。

所以说呢这儿会有一个内容啊，通常我们就用在什么呢？交换机。啊，货。其他应用。🤧好，这不重要。啊，那么你需要。了解的就是需要记住的就是啊，那么它是可靠的面向连接的字节为流的传输层的服务。Oh。啊。

在传输层的服务啊，这句话重要。好。接下来这句话采用。三次握手。建立一个连接。Okay。啊，建立一个连接。下边这个断开连接的时候，采用4次挥手。断开一个连接。这里重要的。啊，三次握手，四次挥手。

所以面试的时候呢，或有一些啊过程中会问你。三卧四灰，我们简称三卧四灰啊。那么三次握手建立一个连接。啊，三次握手建立一个连接。那么这个建立连接的过程整体的都要背下来啊，掌握了，我一会儿跟你说啊。

我一会儿跟你说。那么TCP它在建立连接的时候。啊，传输数据。啊，传输数据。的3个。3个。阶段。I。啊。建立连接。数据传输。断开连接。



![](img/754c3d16fe57f07724c5612f3fd8aa4d_45.png)