# 系列 2：P20：马士兵老师面试题：5.对象怎么定位？ - Java视频学堂 - BV1Hy4y1t7Bo

我看刚才有同学说老师这个数组和其他的不一样，对数组是五分五部分构成啊，这个不难，先把它略过，看这里对象怎么定位，对象怎么定位，指的是什么意思呢，注意对象怎么定位，指的是当这么写。

说t小t等于6t指的是我们通过这个小t是怎么找到这个对象的，有同学说了，老师还不简单吗，不就是个指针吗，小t就是指指针顺着指针找到地址，知道这个对象的大小，把这块空间一截出来，ok这就是那个对象了。

我替呢找到这个首地址的这段往后数呗，好像就是整个对象，没错，你说的很对，但是啊真正的虚拟机的执行过程啊，虚拟机的设计者实际上除了这种这种方式之外，还有一种方式，这种这种方式叫直接指针。

还有一种方式叫间接指针，他叫句柄方式啊，我不记这个句柄这个词了，句柄这词好久没见过了，句柄这个词啊是最早微软发明的，那时候就叫handle嗯，但是现在呢你就把它当成一个间接指令用就可以了。

看这里有两种方式，第一种叫直接指针，通过这个t直接找到这个对象，这个对象属于哪个类类型的数据指针，实际上是记录在这个对象内部的，也是指向他，就是class pointer，就那个嘛脑就在脑袋上呢。

好找到方法区里面的题材，class整个对象的组织是这么来组织的，所以它叫class o o p2 元模型，这就是它的class单独分开唉，另外一个叫o o b就是这这个这个c加对象里面的。

专门用一个数据结构来代表它，大家看这里除了这种方式之外，实际上还有一种方式，就是这种这种方式是什么意思呢，这种方式的意思是我通过这个t他会时间会找到一个二元组，这个二元组的话呢。

第一部分代表的是这个对象，第二部分是代表的这个数据，这个对象的类型，也就是通过这个类型指针可以找到替代class，通过上面这个对象，这个指针可以直接找到这个对象，这是两种方式，有的jvm确实就是这样的。

咱们但是咱们咱们接触的这位m大多数都是这样的，直接指针，好那大家听我说这是两种方式，如果人家就问你说你对象怎么定位，有两种方式，对没错，但是肯定没完，他肯定会问你说这两种方式有什么区别，有什么好处。

有点晕，讲太快了，那这个二元组在哪里，内存里，你就算在内存里就行，这道题也不是很重要好吧，基本上现在这个m你们见到的多数都不采用这种，咱们见到的多数都是这种，只有这种，ok但是有这种设计。

他会问你这种设计的好处是什么，这种设计的缺点是什么，我相信缺点大家伙拿大腿想想都应该能想得出来，缺点还不简单，你你找你得通过找一次指针，再找一次指针才能找到这对象，而这个直接夸机就找到这对象了。

所以这个的缺点就是慢，这个的缺点就是快二次寻找对，但是这种方式就一点儿好处没有吗，省空间，我看白日梦搁那儿说说这种设计是省空间的大哥，你琢磨琢磨这省空间吗。

这两种方式不就是说这部分指针装到了这个对象里吗，空间是一样的，一点都不少，半点都不少，绝对谈不上省空间啊，注意这个呢比较深入，因为这个里面是涉及到pc回收的问题，大家应该都知道这个gc回收问题是这样的。

gc的回收问题是要修改这个地址，有同学说啊，这个指针还需要进行修改，对没错，gc的回收会涉及到对象的移动，比如说我们说最简单的，我们把一个对象从低电源去，刚刚分配好的给它放到old区老年代。

那么你需不需要移动这个对象，移动这个对象，如果我们有一个引用指向，原来是指向这个这里的，它移动了位置之后，你要不要改它的值，必须要改，所以采用这种方式，你发现这个t是不用改的，就整个回收过程。

我们在垃圾回收器回收的过程之中，我们回收的过程之中是不用频繁改动这个t的，但是这种的你就必须要改动这个t class class什么区别一样的，是不是有的人写成k开头和那个原来的那个加一点区别。

有的人呢你就直接写c开头也可以，无所谓好我们就讲到这儿好吧，这道题也不是很重要啊，实际数据指针也不变了，这个指针必须得变，但是它重点是这个这个不变，这个不变就能省省很多很多好处啊，就讲到这里啊。

