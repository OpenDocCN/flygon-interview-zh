# 舍不得花27980买马士兵教育的MCA架构师课程？免费开源马士兵教育VIP课程 - P6：【JVM调优实战】常用垃圾回收算法与常用垃圾回收器 - 马士兵北京中心 - BV1VP411i7E4

当我们知道了什么是垃圾。当我们定位了什么是垃圾，定位好了之后呢，我们要把它给清掉，对不对？好，清除算法从上个世纪60年代开始发明的，到现在为止。几十年过去了。就这三种清除算法就这三种。这三种是啥呢？

第一种叫mark sweep，第二种叫copy，第三种叫mark compact。背窝就行了，特别简单。仔细看。第一种叫mark sweep，就是我找到了标记，标把它标记成为垃圾之后把它给清掉。

就这么点。原来O这哥们是垃圾了，怎么办？打上个标记，说这块空间可用了，可以可以使用了。😊，后面的人可以在这里面分配内存了。😊，搞掂。梦洁说，什么情况根不可达，没想出来。我的老天爷呀，梦洁。

你是玩语言的吗？object O等于 newobject。好，这里有我小O指向，它我写O等于空。来，你告诉我这个O指向谁，这个引用还有没有？Yeah。哎呀。😔，Yeah。让我忍住怒火继续给你们往下讲。

开个玩笑啊嗯。总是有两年年得睡呀。😊，看一下看一下啊，我们回回着气氛，听课听着怪累的，稍微聊会儿小天天ok。😊，好，我们来看这个标记清除啊，标记清除的意思就是哎我们简单说吧，我们顺着根开始找。

找到的全都不是垃圾，这些找不着的，全是垃圾，怎么办？把它们清掉。哎，这就叫标记清除。简单吧，就这么简单嗯。找到的这些全都不是垃圾，没找到这些全是垃圾，怎么办？清掉咔嚓咔嚓清掉。好，标记清楚。

比较清除这种算法呃，虽然说比较简单，但是有它的毛病，毛病在哪儿呢？当我们好多好多次运行运行很长时间之后，你会发现这儿也有青掉的部分，这儿也有青掉的部分，这儿也有青调的部分，这儿也有青掉的部分。

你会发现你的内存。变成了碎片化特别严重。碎片有好多有好多洞。然后这时候你要是想来了一块大的空间，我想分配下去，你发现你找不着了啊，碎片化特别严重。嗯。好嘞。当然呃第二种算法没有碎片化。但是也有它的毛病。

第二种思环叫拷贝，拷贝也特别简单啊，认真看。其实啊就很简单，不管你们家多大。😊，你们仨只能用一半儿。你女朋友，你男朋友好，在里边玩吧，随便玩随便折腾。折腾完了之后呢，我的垃圾回收器进来了啊。

你妈妈拎着一把笤帚就进来了，他进来之后干了一件什么事儿呢？顺着你们仨开始。😊，这根儿开始找找找找找出来的东西，整体性的全都复制到另外一半里面去。复制过来，同时排列好，看到了？原来那个没排列好的哎。

都给它排列好，然后把左边这半边整体性的全部回手。OK这个算法也简单，效率越高。但是我相信你那大腿想一想，也应该知道他的毛病之所在。还用我说吗？浪费内存。没问题吧，很简单啊嗯。😊。

我们再聊第三种叫mer compact。mark compact什么意思啊？这就更简单了。就是既然第一种呢碎片，第二种呢浪费内存，干脆呢我就在回收的时候直接把它整理好。什么意思？再说一下你你女朋友。

你男朋友好，扔小线团。然后运行的过程之中呢，产生了各种各样的垃圾。当我在。回收它的时候，我顺带着把内存整理一下，整理成什么样的？整理成排列的整整齐齐的，排排坐吃果锅，你们仨在这儿后面的有用的。

在后面跟着。好，剩余所有的空间都是可以用的。very good，这叫标记整理，叫标记压缩。这种算法。呃，也很形象，就是你的你的硬盘的碎片给整理嘛。😊，他也没有这种内存的碎片化，它都是连续的空间。

但是问题就出在效率很低啊，它是这三种之中效率最低的。好，一共就有就这三种。从上个世纪60年代开始到今天。我告诉你，就这三种，没有别的。不知道我说清楚没有。这块有疑问吗？是。很简单吧。听我说。所以呢。

看这里啊。就这三种算法呀。好。是。我的中文呢中文。就这三种算法都有毛病。都有毛病。就是说你要是把你的内存当成一整块的时候，无论你采用什么样的算法，都有它自己的问题。所以。垃圾回收剂非常聪明。

它呢是用这三种算法综合运用，然后同时对内存进行了划分。产生了各种各样的不同的形成自己个性的垃圾回收器啊，妈妈爸爸、爷爷奶奶、叔叔阿姨都可以帮你来进行垃圾回收，但是每种都有它自己的特点。啊，同学们。

下面我们看垃圾回收剂总的图。垃圾回收剂的总图。嗯。喂大家放在这儿啊。好，那这是垃圾回收据的总图。那么大家听我讲啊，这垃圾回收据总图呢在JVM从JDK1。0诞生。到现在，JDK14。从1。0到14。

一共诞生了10种垃圾回收器。这十0种垃圾回收器我一会儿呢沿着历史，我慢慢给你捋出来，你就理解了这10种垃圾回收器它到底是怎么玩的了。每一种的特点是什么？好，我们先来把它背过。有同学说老师。

你这个东西要背过吗？没错，你跟面试官想吹牛逼，或者你想把它掉下来打的时候。😊，你就把它给背过，但是他也不难。这几种垃圾回收器呢。你我你先花个几十秒先大概看一眼。分成什么呢？分成是把内存分成两部分的。

以及把内存分成多部分的。嗯。好，看这里前面这6种是属于内存分带模型，后面这三种呢属于内存不分带。但是G one呢它逻径上是分带的abilent是个特别好玩的垃圾回收器。

叫做它是它是什么都不干的垃圾回收器。好，听我讲，我一个一个啊，今天是已经9点20了。没关系，我一个一个的给你们捋清楚，好吧。不。好，大家看这里啊。呃。我们先说啊，就是这个垃圾回收器的演演化过程。

这个垃圾回收器的演化呢。Yeah。GC的演化这个垃圾回收器的演化呀是随着内存大小的。不断增长。耳眼镜。这句话很重要，就是为什么有那种比较简单的垃圾回收器，它不用后面越来越复杂，各种算法也越来越复杂。

为什么呢？原因是什么？就是因为内存的大小在不。