# 马士兵教育MCA4.0架构师课程 - P3：2、程序中最难调试的BUG：野指针和并发问题 - 马士兵学堂 - BV1E34y1w773

我告诉你程序之中最难调试的bug就来源于这里，程序之中最难调试的bug，一个是野指针，一个是并发问题，这两大问题是程序之中最最难以调试的bug，好解释一下什么叫野指针，野指针的意思是很简单，同一个对象。

释放了两次，好这是什么意思，不能说呃，Sorry，不能说，释放了两次，就是同一个对象，同一个对象，两个指针一个释放了，另外一个不知道还拿来用，或者说虽然说同一个对象是可能是同一个指针。

或者说是同一个指针，不同位置，其中一个其实这个对象已经释放了，但是另外一个指针的另外一个位置的指针，不知道，另外一个县城里面的指针不知道好，它依然还在使用，这个是野指针，就是不再指向任何对象的指针。

这就是著名的有一个异常叫now pointer exception，呃如果你原来学过C语言，C加加语言，经常的这种东西会引起内存的崩溃，我告诉你，这是所有语言所面临的最难调试的bug。

包括java这个东西是怎么产生的呢，非常简单，给大家看看这张图，为大家再稍微画一下，再看这里简化一下，同学们听我说，我不管你是任何的语言，假如说我们有两个指针，Ctrl c ctrl v，要O了要P吧。

好看这里假如这个O和这个P这俩哥们呢，同时指向的是同一个对象，那么如果我们程序执行的时候，比方说我在main方法里面要把这个对象给干掉了，或者我在M方法里面把这个对象给干掉了，给他删了。

那我问你妹方方面的这个小O，它指向的是个什么东西啊，指向的什么东西，java就叫地址，没有指针，java叫引用，本质上就是指针，好吧，我们谈本质啊，不要谈那个那个那个你你不要咬文嚼字，你不要学孔乙己。

非得跟我矫情回字，有四种写法，这个东西没意义，理解什么意思就行好吧，玩文字游戏是最没劲的，这时候这时候就变成空值了，对不对，更有甚者，你这块删了之后被别人给占了，你想想看会发生什么，会发生。

你指向了别人对象，也许你操纵，我告诉你，你拿到了别人的这块内存里面的东西，以前啊在内存里面偷别人密码，就是这么干的，嗯好好听，我说，这是程序史上最难调试的bug，就是野指针。

这个指针指向了它不该指向的东西，他特别严，这个这个就叫野指针，不知道我说清楚没有嗯，C和C加加里面呢是永远要面临这个问题的，也许一不小心你这边删了另外一个指针，还在使用它。

也许你这不小心这边删了其他的程序，或者说其他的程序的部分内容，又又又又占用了这块空间了，那么这时候你另外一个指针指向了它，不该指向的内容好了，我现在并没有聊java语言，我现在聊的是所有语言。

就是无论是什么什么语言，都要面临这个问题，你要正确的删除这块空间，不能多删一次，也不能不删，还得保证你删完之后，所有人都用不了，好吧，这是非常非常难的啊，我告诉你，这是第一。

这是第一种特别难调试的bug，历史上这种bug维护起来超级超级难，你知道go语言是怎么诞生的，go语言是原来google为了替代他们以前写过的好多，C语言的程序，C语言程序写起来也许比较容易。

但是维护起来超级麻烦，bug调试起来特别特别困难，所以他们开发了go语言，go语言呢，不再用手工的方式去维护这些内存空间，而是调用也跟java一样，引入了GC，当然这是最难调试的bug之一。

那么第二个最难调试的bug是并发问题，我觉得这个问题稍微一说你就明白，就是多线程，访问同一块，内存空间，如果这个并发问题，再加上野指针问题结合起来的话，你调试起来就更麻烦了，这里只是一个县城站。

完全有可能我还要来，另外，另外的一两个这个是非常有可能的，你想想看，行了，这图不太好画啊，这这图呢不太好画，缩小一点，这哥们放这边来，完全有可能发生一种什么情况，我这个县城站里面啊。

也有好多好多的指针好，我指向了这个对象，也许是我这个线程把这对象给删了，也许是我这个线程访问的时候，我俩同时开始写，造成了数据的不一致，好了，我告诉你，像这样的问题，调试起来是最最头疼最麻烦的。

不知道大家有没有这方面的体会，当然有同学说老师我天天写CROD，我是没有这方面体会的，那就没招了，这也是为什么你呃，你你你你你你你不应该不能关，只关注CRUD的原因，因为面试里面好多好多的问题。

都要牵扯到这方面问题了，好吧，嗯所以所有的程序啊，最难调试的bug基本上就这两个，这是最难调试，一个叫野指针。

